"use strict";(self["webpackChunkuntitled1"]=self["webpackChunkuntitled1"]||[]).push([[238,157],{7238:function(e,a,l){l.r(a),l.d(a,{default:function(){return F}});var r=l(3396);const t=e=>((0,r.dD)("data-v-54785cee"),e=e(),(0,r.Cn)(),e),s={class:"all"},o=t((()=>(0,r._)("div",{class:"head"},[(0,r._)("br"),(0,r._)("p",{class:"title"},"宿 舍 管 理 系 统")],-1))),u={class:"login"},m=(0,r.Uk)("登录"),d=(0,r.Uk)("     "),i=(0,r.Uk)("重置"),n=(0,r.Uk)("查看审核");function p(e,a,l,t,p,c){const g=(0,r.up)("el-input"),f=(0,r.up)("el-form-item"),w=(0,r.up)("el-button"),h=(0,r.up)("el-form"),b=(0,r.up)("el-tab-pane"),F=(0,r.up)("register"),k=(0,r.up)("el-tabs");return(0,r.wg)(),(0,r.iD)("div",s,[o,(0,r._)("p",u,[(0,r.Wm)(k,{modelValue:p.activeName,"onUpdate:modelValue":a[4]||(a[4]=e=>p.activeName=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{label:"登录",name:"first"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{model:p.ruleForm,rules:p.rules,ref:"ruleForm","label-width":"100px",class:"demo-ruleForm"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{label:"用户名",prop:"userName",class:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{modelValue:p.ruleForm.userName,"onUpdate:modelValue":a[0]||(a[0]=e=>p.ruleForm.userName=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(f,{label:"密码",prop:"pass",class:"pwd"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{type:"password",modelValue:p.ruleForm.pwd,"onUpdate:modelValue":a[1]||(a[1]=e=>p.ruleForm.pwd=e),"auto-complete":"off"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(w,{type:"primary",onClick:a[2]||(a[2]=e=>c.submitForm("ruleForm"))},{default:(0,r.w5)((()=>[m])),_:1}),d,(0,r.Wm)(w,{onClick:a[3]||(a[3]=e=>c.resetForm("ruleForm"))},{default:(0,r.w5)((()=>[i])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,r.Wm)(b,{label:"注册",name:"second"},{default:(0,r.w5)((()=>[(0,r.Wm)(F)])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(w,{class:"search",onClick:c.tosearch},{default:(0,r.w5)((()=>[n])),_:1},8,["onClick"])])])}l(1703),l(7658);var c=l(157),g=l(6265),f=l.n(g),w={data(){var e=(e,a,l)=>{""===a?l(new Error("请输入密码")):l()};return{activeName:"first",token:"",code:0,message:"",usertype:0,ruleForm:{userName:"",pwd:"",checkPass:""},rules:{userName:[{required:!0,message:"请输入您的名称",trigger:"blur"},{min:4,max:16,message:"长度在 4 到 16 个字符",trigger:"blur"}],pass:[{required:!0,validator:e,trigger:"blur"},{min:6,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}]}}},methods:{resetForm(e){this.$refs[e].resetFields()},tosearch(){this.$router.push("/search")},submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;f().post("/login",this.$data.ruleForm).then((e=>{console.log(e.data.data),this.$data.code=e.data.code,this.$data.message=e.data.message,this.$data.token=e.data.token;let a=this.$data.code;if(0!==a)this.$message({type:"error",message:this.$data.message});else{this.$data.usertype=e.data.data.userType,this.$message({type:"success",message:"登录成功"}),window.localStorage.setItem("token",this.$data.token),window.localStorage.setItem("userName",e.data.data.userName),window.localStorage.setItem("name",e.data.data.name),window.localStorage.setItem("userType",e.data.data.nuserType),console.log(window.localStorage.getItem("dormitoryId"));let a=this.$data.usertype;1===a?this.$router.push("/index"):2===a?this.$router.push("/housemaster"):3===a?this.$router.push("/admin"):console.log("userType Error")}}))}))}},components:{register:c["default"]}},h=l(89);const b=(0,h.Z)(w,[["render",p],["__scopeId","data-v-54785cee"]]);var F=b},157:function(e,a,l){l.r(a),l.d(a,{default:function(){return g}});var r=l(3396);const t=(0,r.Uk)("     "),s=(0,r.Uk)("注册"),o=(0,r.Uk)("     "),u=(0,r.Uk)("重置");function m(e,a,l,m,d,i){const n=(0,r.up)("el-input"),p=(0,r.up)("el-form-item"),c=(0,r.up)("el-option"),g=(0,r.up)("el-select"),f=(0,r.up)("el-button"),w=(0,r.up)("el-form");return(0,r.wg)(),(0,r.j4)(w,{model:d.ruleForm,rules:d.rules,ref:"ruleForm","label-width":"100px",class:"demo-ruleForm"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{label:"用户名",prop:"userName",class:"userName"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:d.ruleForm.userName,"onUpdate:modelValue":a[0]||(a[0]=e=>d.ruleForm.userName=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,{label:"姓名",prop:"name",class:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:d.ruleForm.name,"onUpdate:modelValue":a[1]||(a[1]=e=>d.ruleForm.name=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,{label:"密码",prop:"pwd",class:"pwd"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{type:"password",modelValue:d.ruleForm.pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>d.ruleForm.pwd=e),"auto-complete":"off"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,{label:"确认密码",prop:"checkPass",class:"check"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{type:"password",modelValue:d.ruleForm.checkPass,"onUpdate:modelValue":a[3]||(a[3]=e=>d.ruleForm.checkPass=e),"auto-complete":"off"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,{label:"身份证号",prop:"id",class:"id"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:d.ruleForm.id,"onUpdate:modelValue":a[4]||(a[4]=e=>d.ruleForm.id=e),"auto-complete":"off"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,{label:"用户类型",prop:"userType",class:"type"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{modelValue:d.ruleForm.userType,"onUpdate:modelValue":a[5]||(a[5]=e=>d.ruleForm.userType=e),class:"m-2",placeholder:"请选择用户类别",size:"large",autocomplete:"off"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(d.options,(e=>((0,r.wg)(),(0,r.j4)(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.Wm)(p,{class:"bottom"},{default:(0,r.w5)((()=>[t,(0,r.Wm)(f,{type:"primary",onClick:a[6]||(a[6]=e=>i.submitForm("ruleForm"))},{default:(0,r.w5)((()=>[s])),_:1}),o,(0,r.Wm)(f,{onClick:a[7]||(a[7]=e=>i.resetForm("ruleForm"))},{default:(0,r.w5)((()=>[u])),_:1})])),_:1})])),_:1},8,["model","rules"])}l(1703),l(7658);var d=l(6265),i=l.n(d),n={data(){var e=(e,a,l)=>{""===a?l(new Error("请输入密码")):l()},a=(e,a,l)=>{""===a?l(new Error("请再次输入密码")):a!==this.ruleForm.pwd?l(new Error("两次输入密码不一致!")):l()};return{options:[{value:1,label:"宿舍居住者"},{value:2,label:"宿舍管理员"},{value:3,label:"系统管理员"}],activeName:"second",ruleForm:{userName:"",pwd:"",checkPass:"",id:"",userType:1,name:""},rules:{userName:[{required:!0,message:"请输入您的名称",trigger:"blur"},{min:4,max:16,message:"长度在 4 到 16 个字符",trigger:"blur"}],pwd:[{required:!0,validator:e,trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],checkPass:[{required:!0,validator:a,trigger:"blur"}],id:[{required:!0,message:"请输入您的身份证号码",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入合法的身份证",trigger:"blur"}],name:[{required:!0,message:"请输入您的姓名",trigger:"blur"}]}}},methods:{submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;i().post("/register",this.$data.ruleForm).then((e=>{console.log(e.data);let a=e.data.code;0!==a?(this.$message({type:"error",message:e.data.message}),this.$router.push("/")):this.$message({type:"success",message:"提交注册成功"})}))}))},resetForm(e){this.$refs[e].resetFields()}}},p=l(89);const c=(0,p.Z)(n,[["render",m],["__scopeId","data-v-3fafd2ea"]]);var g=c}}]);
//# sourceMappingURL=238.cdb1e5b4.js.map